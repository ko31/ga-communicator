/*! For license information please see ga-communicator-setting.js.LICENSE.txt */
!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){"use strict";const n=jQuery,{sprintf:o}=wp.i18n,{apiFetch:r}=wp,s=e=>{const t=n(e).attr("data-key");n(e).addClass("loading"),n(e).addClass("loading"),n(e).find('option[class!="ga-setting-choices-default"]').remove(),r({path:i(t)}).then((t=>{const a=n(e).find(".ga-setting-choices"),r=n(e).find('input[type="hidden"]').val();t.forEach((e=>{const t=n(o('<option value="%s">%s(%s)</option>',e.id,e.name,e.id));e.id===r&&t.attr("selected",!0),a.append(t)}))})).catch((e=>{((e,t)=>{const a=n(o('<div class="notice notice-error">%s<span class="notice-dismiss"></span></div>',t));n(`div[data-key="${e}"]`).append(a),setTimeout((()=>{a.remove()}),3e3)})(t,e.message)})).finally((()=>{n(e).removeClass("loading")}))},i=e=>{let t="ga/v1";switch(e){case"ga-account":t+="/accounts";break;case"ga-property":t+=o("/properties/%s",c("ga-account")||" ");break;case"ga-profile":t+=o("/profiles/%s/%s",c("ga-account")||" ",c("ga-property")||" ")}return t},c=e=>(e=>{const t=n(`code[data-predefined="${e}"]`);return t.length?t.text():""})(e)||n(`input[name="${e}"]`).val(),l=e=>{n(".ga-setting-example").each((function(t,a){e===n(a).attr("data-sample")?n(a).addClass("toggle"):n(a).removeClass("toggle")}));let t="";e.length&&(t=n(`pre[data-example="${e}"]`).text()),n("#ga-extra").attr("placeholder","e.g.\n"+t)};n((()=>{n(".ga-setting-row").each((function(e,t){s(t),n(t).find("select").change((function(){(e=>{const t=n(e).attr("data-key");n(e).find('input[type="hidden"]').val(n(e).find("select").val());let a=0;const o=["ga-profile","ga-property"];switch(t){case"ga-account":a=2;break;case"ga-property":a=1}for(let e=0;e<a;e++)s(n(`div[data-key="${o[e]}"]`))})(t)}))}));const e=n("select#ga-tag");e.length&&(l(e.val()),e.change((function(){l(n(this).val())}))),n(".ga-nav-tab").click((function(e){e.preventDefault(),n(".ga-nav-tab-content").css("display","none"),n(".ga-nav-tab").removeClass("nav-tab-active"),n(n(this).attr("href")).css("display","block"),n(this).addClass("nav-tab-active")}))}))}]);
//# sourceMappingURL=ga-communicator-setting.js.map